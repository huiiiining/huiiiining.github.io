<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SocialSnap - Follow Requests</title>
    <link href="https://fonts.googleapis.com/css2?family=Bitter:ital,wght@0,400;0,700;1,400&family=Luckiest+Guy&display=swap" rel="stylesheet">
    <style>
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            overflow: hidden; background-color: #fdfdfd; 
            font-family: 'Bitter', serif;
        }

        .app-full-screen {
            display: flex; flex-direction: column;
            width: 100vw; height: 100vh;
        }

        .app-header-full {
            background: linear-gradient(135deg, #ff79b0 0%, #ffb6c1 100%);
            color: white; padding: 50px 20px 20px;
            text-align: center; font-family: 'Luckiest Guy';
            font-size: 1.8rem;
        }

        .request-area {
            flex: 1; display: flex;
            justify-content: center; align-items: center;
            padding-bottom: 120px;
        }

        .request-card {
            width: 85%; max-width: 380px; background: white; 
            padding: 40px 20px; border-radius: 30px; 
            border: 1px solid #eee; box-shadow: 0 15px 35px rgba(0,0,0,0.08);
            text-align: center;
        }

        .profile-circle {
            width: 90px; height: 90px; background: #f0f2f5;
            border-radius: 50%; margin: 0 auto 15px;
            display: flex; align-items: center; justify-content: center; font-size: 3rem;
        }

        /* BUTTONS */
        .btn-accept { background: #ff79b0; color: white; border: none; padding: 15px 35px; border-radius: 30px; font-weight: bold; cursor: pointer; }
        .btn-deny { background: #eee; color: #999; border: none; padding: 15px 35px; border-radius: 30px; cursor: pointer; transition: transform 0.1s ease-out; }

        /* EDUCATION BOX (CENTERED MODAL) */
        .edu-box {
            position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 80%; max-width: 400px;
            background: white; padding: 30px;
            border-radius: 25px; border: 4px solid #ff79b0;
            text-align: center; z-index: 2000;
            display: none; /* Hidden by default */
            box-shadow: 0 0 0 100vw rgba(0,0,0,0.6), 0 10px 30px rgba(0,0,0,0.3);
        }

        /* NARRATIVE BOX (LOWER THIRD) */
        .narrative-box {
            position: fixed;
            bottom: 2%;
            left: 50%;
            transform: translateX(-50%);
            width: 85%;
            max-width: 700px;
            background: rgba(255, 182, 193, 0.2); 
            backdrop-filter: blur(8px); 
            border-top: 3px solid#f699bf;
            padding: 10px;
            border-radius: 30px;
            text-align: center;
            z-index: 200;
        }
         .narrative-box p { color: #ffcdd2; margin: 0; font-size: 0.95rem; font-style: italic; }

    </style>
</head>
<body>

    <audio id="audio9" src="audio/Olivia_9.mp3"></audio>
    <audio id="audio11" src="audio/Olivia_11.mp3"></audio>
    <audio id="audio12" src="audio/Olivia_12.mp3"></audio>

    <div class="app-full-screen">
        <div class="app-header-full">SocialSnap</div>
        <div class="request-area">
            <div class="request-card">
                <div class="profile-circle">ðŸ‘¤</div>
                <h2>Ryan (@Ryan_Real)</h2>
                <p><strong>12 mutual friends</strong></p>
                <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px;">
                    <button id="denyBtn" class="btn-deny">Ignore</button>
                    <button class="btn-accept" onclick="handleAccept()">Accept</button>
                </div>
            </div>
        </div>
    </div>

    <div id="eduBox" class="edu-box">
        <h2 style="font-family: 'Luckiest Guy';">Wait! ðŸ›‘</h2>
        <p>Just because someone has <strong>mutual friends</strong> doesn't mean you know them! Scammers often "friend-hop" to look real.</p>
        <button class="btn-accept" onclick="finalTransition()">Got It!</button>
    </div>

    <div class="narrative-box">
        <p id="narrativeText">"A follow request from Ryan... 12 mutual friends? Do I know him?"</p>
    </div>

    <script>
        const a9 = document.getElementById('audio9');
        const a11 = document.getElementById('audio11');
        const a12 = document.getElementById('audio12');
        const narrative = document.getElementById('narrativeText');
        const denyBtn = document.getElementById('denyBtn');

        let glitchActive = false;

        window.onload = () => a9.play();

        denyBtn.addEventListener('mouseover', () => {
            if(!glitchActive) {
                glitchActive = true;
                a9.pause(); a11.play();
                narrative.innerText = "Ugh, the ignore button is glitching out! I guess I'll just accept so I can tell him to stop if he's weird.";
            }
            denyBtn.style.transform = `translate(${Math.random()*160-80}px, ${Math.random()*100-50}px)`;
        });
        function handleAccept() {
    // 1. Stop background audio immediately
    a9.pause(); 
    a11.pause();
    
    // 2. Play the final confirmation (Olivia_12: "Accepted. Let's see...")
    if(a12) {
        a12.play();
        
        // 3. When she finishes speaking, show the warning box
        a12.onended = function() {
            showWarning();
        };
    } else {
        showWarning(); // Fallback if audio fails
    }

    // Update the subtitle text one last time while she speaks
    narrative.innerText = "Accepted. Let's see what happens next...";
}

function showWarning() {
    // Reveal the centered pop-up
    document.getElementById('eduBox').style.display = 'block';
    
    // Optional: Hide the narrative box entirely so it's not distracting
    document.querySelector('.narrative-box').style.display = 'none';
}

        function finalTransition() {
            document.body.style.transition = "opacity 0.8s";
            document.body.style.opacity = "0";
            setTimeout(() => { window.location.href = "Page7.html"; }, 800);
        }
    </script>
</body>
</html>